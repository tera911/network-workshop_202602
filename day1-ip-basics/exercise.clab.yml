# Day 1: IPアドレスと疎通確認 - 演習用トポロジ（穴あき版）
#
# 【演習】
# router1 と router2 に IP アドレスを設定して、
# host1 から host2 へ ping が通るようにしてください。
#
# 構成:
#   host1 --- router1 --- router2 --- host2
#
# ネットワーク設計:
#   host1 - router1: 192.168.1.0/24
#   router1 - router2: 10.0.0.0/24
#   router2 - host2: 192.168.2.0/24

name: day1-exercise

topology:
  nodes:
    # ルーター（IP アドレス未設定）
    router1:
      kind: linux
      image: ghcr.io/vyos/vyos:current
      # 演習: ここで IP アドレスとスタティックルートを設定してください

    router2:
      kind: linux
      image: ghcr.io/vyos/vyos:current
      # 演習: ここで IP アドレスとスタティックルートを設定してください

    # ホスト（設定済み）
    host1:
      kind: linux
      image: alpine:latest
      exec:
        - ip addr add 192.168.1.10/24 dev eth1
        - ip route add default via 192.168.1.1

    host2:
      kind: linux
      image: alpine:latest
      exec:
        - ip addr add 192.168.2.10/24 dev eth1
        - ip route add default via 192.168.2.1

  links:
    - endpoints: ["host1:eth1", "router1:eth1"]
    - endpoints: ["router1:eth2", "router2:eth1"]
    - endpoints: ["router2:eth2", "host2:eth1"]
